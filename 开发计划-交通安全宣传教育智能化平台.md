# 开发计划

# 交通安全宣传教育工作智能化平台

> 基于 OpenClaw Agent Skills 的本地验证方案

## 技术栈

| 技术 | 用途 |
|------|------|
| OpenClaw | AI Agent 框架，承载全部 Skill |
| SKILL.md | Skill 定义文件（YAML frontmatter + Markdown 指令） |
| LLM API | AI 推理（Claude / GPT / 本地模型，由 OpenClaw 管理） |
| JSON | 本地数据存储格式（素材元数据、审核记录、模拟数据） |
| Markdown | 内容输出格式（文案、计划、报告） |
| Skills CLI (`npx skills`) | Skill 安装与管理 |

---

## 项目结构

```
traffic-project/
├── skills/                           # OpenClaw workspace skills（核心）
│   ├── content-producer/
│   │   └── SKILL.md                  # 内容生产 Skill
│   ├── media-hub/
│   │   └── SKILL.md                  # 素材中枢 Skill
│   ├── content-reviewer/
│   │   └── SKILL.md                  # 内容审核 Skill
│   ├── plan-manager/
│   │   └── SKILL.md                  # 计划管理 Skill
│   ├── analytics/
│   │   └── SKILL.md                  # 效果监测 Skill
│   ├── precision-outreach/
│   │   └── SKILL.md                  # 精准宣传 Skill（P2）
│   ├── emergency-response/
│   │   └── SKILL.md                  # 应急响应 Skill（P2）
│   └── public-relations/
│       └── SKILL.md                  # 公共关系 Skill（P2）
│
├── data/                             # 本地数据层
│   ├── materials/
│   │   ├── index.json                # 素材索引（全量元数据列表）
│   │   └── items/                    # 单条素材元数据
│   │       ├── mat-001.json
│   │       └── ...（≥ 30 条模拟数据）
│   ├── analytics/
│   │   ├── wechat-202601.json        # 微信模拟传播数据
│   │   ├── weibo-202601.json
│   │   └── douyin-202601.json
│   ├── reviews/                      # 审核记录（Agent 运行时写入）
│   └── accident-data/
│       └── 2025-summary.json         # 模拟事故数据（P2 用）
│
├── output/                           # Agent 生成的产出物（运行时写入）
│   ├── content/                      # 文案
│   ├── plans/                        # 宣传计划
│   ├── reports/                      # 分析报告
│   ├── posters/                      # 海报方案 JSON
│   └── scripts/                      # 视频脚本
│
├── templates/                        # 模板文件（Skill 引用）
│   ├── content-wechat.md             # 微信推文格式模板 + 范例
│   ├── content-weibo.md              # 微博格式模板
│   ├── content-douyin.md             # 抖音格式模板
│   ├── poster-brief.json             # 海报方案 JSON 结构模板
│   ├── video-script.md               # 分镜脚本格式模板
│   ├── review-checklist.md           # 审核检查清单（敏感词 + 规则）
│   ├── plan-monthly.md               # 月度计划结构模板
│   └── report-monthly.md             # 月度报告结构模板
│
├── docs/
│   ├── PRD-交通安全宣传教育智能化平台.md
│   └── 开发计划-交通安全宣传教育智能化平台.md  # 本文件
│
└── 交通安全宣传教育工作智能化应用场景.md       # 原始需求文档
```

---

## 开发阶段划分

### 阶段 0：项目骨架 + 基础数据准备

**目标**：搭建目录结构，准备模板和模拟数据，让后续 Skill 开发有数据可用。

| # | 任务 | 产出 |
|---|------|------|
| 0.1 | 创建完整目录结构 | `skills/`, `data/`, `output/`, `templates/` 目录就绪 |
| 0.2 | 编写微信推文格式模板 | `templates/content-wechat.md` — 含格式规范 + 2 篇范例 |
| 0.3 | 编写微博格式模板 | `templates/content-weibo.md` — 含字数限制 + 范例 |
| 0.4 | 编写抖音格式模板 | `templates/content-douyin.md` — 含口语化风格规范 + 范例 |
| 0.5 | 编写海报方案 JSON 模板 | `templates/poster-brief.json` — 结构化字段定义 |
| 0.6 | 编写视频脚本模板 | `templates/video-script.md` — 分镜表格式 |
| 0.7 | 编写审核检查清单 | `templates/review-checklist.md` — 敏感词库 + 合规规则 |
| 0.8 | 编写月度计划模板 | `templates/plan-monthly.md` — 计划结构 + 字段说明 |
| 0.9 | 编写月度报告模板 | `templates/report-monthly.md` — 报告结构 |
| 0.10 | 生成素材模拟数据（≥ 30 条） | `data/materials/items/*.json` + `data/materials/index.json` |
| 0.11 | 生成传播模拟数据 | `data/analytics/*.json` |

**完成标志**：所有目录和模板文件就位，模拟数据集完整。

---

### 阶段 1：content-producer Skill（内容生产）

**目标**：实现核心 AI 内容生产能力 — 输入主题，输出多平台文案 + 海报方案 + 视频脚本。

| # | 任务 | 产出 |
|---|------|------|
| 1.1 | 编写 content-producer SKILL.md | Skill 定义文件 |
| 1.2 | 定义触发条件 | 用户提到"写文案""生成内容""写推文"等关键词时激活 |
| 1.3 | 实现多平台文案生成指令 | 读取对应平台模板 → LLM 生成 → 保存到 `output/content/` |
| 1.4 | 实现海报方案生成指令 | 基于文案生成 3 套方案 → 保存到 `output/posters/` |
| 1.5 | 实现视频脚本生成指令 | 生成分镜脚本 → 保存到 `output/scripts/` |
| 1.6 | 实现语气风格控制 | 支持严肃/温馨/幽默 3 种模式切换 |
| 1.7 | 测试：生成 5 篇不同主题文案 | 验证输出格式、平台适配、文件保存 |

**SKILL.md 核心结构预览**：
```yaml
---
name: content-producer
description: 交通安全宣传内容生产助手。生成适用于微信、微博、抖音等多平台的文案、海报方案和视频脚本。当用户提到"写文案""生成内容""写推文""做海报""写脚本"时激活。
---
```

**完成标志**：对话输入"帮我写一篇关于酒驾危害的宣传内容" → Agent 输出微信/微博/抖音 3 版文案 + 保存文件。

---

### 阶段 2：media-hub Skill（素材中枢）

**目标**：实现本地素材库的自然语言检索和自动标引。

| # | 任务 | 产出 |
|---|------|------|
| 2.1 | 编写 media-hub SKILL.md | Skill 定义文件 |
| 2.2 | 实现素材检索指令 | 读取 `data/materials/index.json` → LLM 语义匹配 → 返回结果 |
| 2.3 | 实现素材标引指令 | 输入素材信息 → LLM 生成标签 → 写入元数据 JSON |
| 2.4 | 实现素材统计指令 | 统计素材总量、各类型分布、热门标签 |
| 2.5 | 测试：10 条搜索查询 | 验证语义匹配准确率 |

**完成标志**：对话输入"查找雨天追尾事故的素材" → Agent 从素材库匹配并返回相关结果列表。

---

### 阶段 3：content-reviewer Skill（内容审核）

**目标**：实现 AI 内容合规审核和多级审核流程模拟。

| # | 任务 | 产出 |
|---|------|------|
| 3.1 | 编写 content-reviewer SKILL.md | Skill 定义文件 |
| 3.2 | 实现 AI 合规检查指令 | 读取审核清单 → 逐项检查 → 输出三级结果 |
| 3.3 | 实现多级审核模拟指令 | 依次模拟初审/复审/终审 → 输出审核报告 |
| 3.4 | 实现审核记录持久化 | 审核结果写入 `data/reviews/` |
| 3.5 | 测试：审核 5 篇含已知问题的文案 | 验证问题检出率 |

**完成标志**：输入一篇文案 → Agent 完成三级审核 → 输出审核报告 + 保存记录文件。

---

### 阶段 4：端到端链路验证

**目标**：验证 3 个 P0 Skill 能否串联完成完整业务流程。

| # | 任务 | 产出 |
|---|------|------|
| 4.1 | 链路测试 1：主题 → 文案 → 审核 | 完整对话记录 |
| 4.2 | 链路测试 2：搜索素材 → 结合素材生成文案 → 审核 | 完整对话记录 |
| 4.3 | 链路测试 3：批量生成（3 个不同主题 × 3 个平台） | 9 篇文案 + 审核报告 |
| 4.4 | 输出质量评估 | 人工评审表（文案可用率、审核准确率） |
| 4.5 | 问题收集和 Skill 迭代优化 | 更新 SKILL.md 中的指令和模板 |

**完成标志**：P0 验证报告产出，含量化评估数据。

---

### 阶段 5（P1）：plan-manager Skill（计划管理）

| # | 任务 | 产出 |
|---|------|------|
| 5.1 | 编写 plan-manager SKILL.md | Skill 定义文件 |
| 5.2 | 实现月度计划生成指令 | 输入月份 → 读取计划模板 + 节假日数据 → 生成计划 |
| 5.3 | 实现计划驱动内容生产 | 基于计划主题，调用 content-producer 批量生成 |
| 5.4 | 测试：生成 3 个月度计划 | 验证结构完整性和主题合理性 |

---

### 阶段 6（P1）：analytics Skill（效果监测）

| # | 任务 | 产出 |
|---|------|------|
| 6.1 | 编写 analytics SKILL.md | Skill 定义文件 |
| 6.2 | 实现数据分析指令 | 读取 `data/analytics/` JSON → LLM 分析 → 生成报告 |
| 6.3 | 实现报告生成指令 | 按模板输出 Markdown 格式月度报告 |
| 6.4 | 测试：生成 1 份月度报告 | 验证数据引用准确性和建议合理性 |

---

### 阶段 7（P2）：扩展 Skills

> P2 阶段 Skill 仅做基础能力验证，不深入优化。

| # | 任务 | 产出 |
|---|------|------|
| 7.1 | precision-outreach：风险分析 + 方案生成 | SKILL.md + 1 次验证 |
| 7.2 | emergency-response：预警触发 + 内容包生成 | SKILL.md + 1 次验证 |
| 7.3 | public-relations：智能客服模拟 | SKILL.md + 1 次验证 |

---

## Skill 编写规范

### SKILL.md 标准结构

```markdown
---
name: skill-name-in-kebab-case
description: 一句话描述（50-100字），包含触发关键词。Agent 根据此描述自动路由。
---

# Skill 名称（中文）

## 功能概述
简要说明这个 Skill 做什么。

## 触发条件
列出用户可能的自然语言输入模式。

## 工作流程
### 步骤 1：理解用户意图
### 步骤 2：读取相关数据/模板
### 步骤 3：生成内容
### 步骤 4：输出结果 + 保存文件

## 数据引用
- 模板文件路径
- 数据文件路径
- 输出文件路径约定

## 输出格式
定义输出的结构化格式。

## 约束规则
- 交警宣传文体要求
- 字数/格式限制
- 合规底线
```

### 命名约定
- Skill 目录名：`kebab-case`（如 `content-producer`）
- 数据文件：`kebab-case.json`（如 `mat-001.json`）
- 输出文件：`{主题}-{平台}-{日期}.md`（如 `春运安全-微信-20260211.md`）
- 审核记录：`review-{序号}.json`

### 质量标准
- 每个 Skill 的 description 必须包含关键触发词
- 每个 Skill 必须定义明确的输出格式
- 每个 Skill 必须引用对应的模板文件路径
- 生成内容的文件名必须包含日期，便于追溯

---

## 验证清单

### P0 完成验收标准

- [ ] 目录结构完整（skills/data/output/templates）
- [ ] 模拟数据就绪（≥ 30 条素材元数据 + 传播数据）
- [ ] 模板文件完整（8 个模板文件）
- [ ] content-producer Skill：输入主题 → 生成 3 平台文案 → 文件保存成功
- [ ] content-producer Skill：生成海报方案 JSON → 保存成功
- [ ] content-producer Skill：生成视频脚本 → 保存成功
- [ ] media-hub Skill：自然语言搜索 → 返回匹配结果（10 次查询 ≥ 8 次命中）
- [ ] media-hub Skill：素材标引 → 标签写入元数据 JSON
- [ ] content-reviewer Skill：AI 审核 → 输出三级结果 + 修改建议
- [ ] content-reviewer Skill：多级审核模拟 → 输出完整审核报告
- [ ] 端到端：主题 → 素材检索 → 内容生成 → 审核 完整链路跑通
- [ ] 文案质量评估：10 篇文案中 ≥ 7 篇人工评审为"可用"
- [ ] 审核准确性评估：10 篇测试内容中问题检出率 ≥ 80%

### P1 完成验收标准

- [ ] plan-manager Skill：输入月份 → 生成完整月度计划
- [ ] analytics Skill：读取模拟数据 → 生成月度报告
- [ ] 计划驱动内容生产链路跑通
