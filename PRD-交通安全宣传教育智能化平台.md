# 产品需求文档（PRD）

# 交通安全宣传教育工作智能化平台

| 属性 | 值 |
|------|------|
| 文档版本 | v2.0 |
| 创建日期 | 2026-02-11 |
| 产品定位 | 本地验证原型（Proof of Concept） |
| 技术架构 | OpenClaw Agent Skills |
| 运行方式 | 本地 OpenClaw 实例 + 自定义 Skills |

---

## 1. 执行摘要

### 1.1 问题陈述

交警支队宣传教育工作当前面临以下痛点：

- **效率瓶颈**：单篇宣传内容从选题到发布，依赖人工完成文案撰写、图片设计、视频剪辑、多平台分发等全链路操作，周期长、人力消耗大。
- **素材散乱**：执法记录仪、道路监控等渠道积累了大量原始素材，但缺乏统一管理和标引，查找困难、复用率低。
- **决策凭经验**：宣传计划制定、效果评估主要依赖主观判断，缺乏数据支撑，难以精准匹配安全风险。
- **审核不规范**：内容审核依赖线下沟通，流程不固化，缺少留痕，存在合规风险。

### 1.2 解决方案

基于 **OpenClaw** 开源 AI Agent 框架，将 8 大宣传教育业务场景封装为**可独立调用、可组合协作的 Agent Skills**。用户通过自然语言对话驱动 AI Agent 完成"计划制定 → 素材管理 → 内容生产 → 审核发布 → 效果监测 → 精准投放"全链路工作。

**为什么选择 OpenClaw：**
- **AI 原生**：Skills 直接调用 LLM 能力，无需 Mock — 文案生成、内容审核、计划制定等 AI 功能开箱即用
- **快速验证**：每个 Skill 只需一个 `SKILL.md` 文件即可运行，无需搭建前后端工程
- **模块化**：8 个业务模块 = 8 个独立 Skill，可独立开发、测试、迭代
- **可扩展**：验证通过后可发布到 ClawHub 供同行复用，也可接入 Web UI 升级为完整产品

### 1.3 本阶段目标

本阶段是**本地验证（PoC）**，核心目标：

| 目标 | 验证内容 | 成功标准 |
|------|---------|---------|
| AI 内容生产可行性 | LLM 能否生成符合交警宣传规范的多平台文案 | 生成 10 篇文案，≥ 7 篇经人工评审可用 |
| 素材管理有效性 | 自然语言能否高效检索本地素材库 | 10 次搜索查询，≥ 8 次返回相关结果 |
| 审核流程可模拟性 | AI 能否识别内容中的合规风险 | 10 篇测试内容中正确标记 ≥ 8 篇的问题 |
| 计划生成实用性 | LLM 能否结合时事/季节生成合理计划 | 生成 3 份月度计划，经评审结构合理 |
| 技能协作可行性 | 多个 Skill 能否串联完成完整业务流程 | 完整走通"计划→生产→审核"链路 |

---

## 2. 用户体验与功能

### 2.1 交互模式

与传统 Web UI 不同，用户通过 **自然语言对话** 驱动所有功能：

```
用户: "帮我写一篇关于春运期间高速公路安全的微信推文"
Agent: [调用 content-producer skill] → 生成文案 → 输出结果

用户: "查找去年冬季追尾事故的视频素材"
Agent: [调用 media-hub skill] → 检索本地素材库 → 返回匹配列表

用户: "审核一下这篇文案有没有敏感词或表述问题"
Agent: [调用 content-reviewer skill] → 合规检查 → 输出审核意见
```

### 2.2 用户角色

本地验证阶段简化为单用户多角色模拟：

| 角色 | 通过 Skill 模拟 | 使用的核心 Skill |
|------|----------------|-----------------|
| **宣传创作员** | 默认角色 | media-hub, content-producer |
| **内容审核员** | 审核 Skill 自动扮演 | content-reviewer |
| **计划制定者** | 计划 Skill 自动扮演 | plan-manager |
| **数据分析员** | 分析 Skill 自动扮演 | analytics |

### 2.3 用户故事与验收标准

#### Skill: content-producer（内容生产 — P0）

**US-CP.1** 作为宣传创作员，我希望输入主题后 Agent 自动生成多平台文案。
- [ ] 输入主题描述，Agent 生成微信推文、微博短文、抖音文案 3 个版本
- [ ] 每个版本符合平台特征（微信长文 800-1500 字、微博 ≤ 140 字、抖音口语化 ≤ 300 字）
- [ ] 支持指定语气风格（严肃警示 / 温馨提醒 / 幽默科普）
- [ ] 生成结果保存为 Markdown 文件到 `output/content/` 目录

**US-CP.2** 作为宣传创作员，我希望 Agent 根据文案生成海报文案方案。
- [ ] 输入文案，Agent 输出 3 套海报方案（标题、副标题、核心文案、视觉风格建议）
- [ ] 每套方案包含尺寸建议和色彩方向
- [ ] 方案保存为结构化 JSON 文件

**US-CP.3** 作为宣传创作员，我希望 Agent 生成短视频脚本。
- [ ] 输入主题，Agent 输出完整短视频脚本（分镜描述、旁白文案、字幕文本、时长建议）
- [ ] 脚本格式为标准分镜表格式

#### Skill: media-hub（素材中枢 — P0）

**US-MH.1** 作为宣传创作员，我希望用自然语言搜索本地素材。
- [ ] 素材库为本地目录（`data/materials/`），包含图片、视频文件及对应的元数据 JSON
- [ ] 支持语义搜索（如"雨天交通事故"能匹配标签含"暴雨""追尾"的素材）
- [ ] 搜索结果返回文件路径、标签、描述

**US-MH.2** 作为宣传创作员，我希望 Agent 为新素材自动生成标签和描述。
- [ ] 提供素材文件名和简要说明，Agent 生成多维度标签（事故类型、违法种类、路段、天气等）
- [ ] 标签结果写入素材对应的元数据 JSON 文件

#### Skill: content-reviewer（内容审核 — P0）

**US-CR.1** 作为审核系统，我希望 Agent 自动检查文案的合规性。
- [ ] 输入文案内容，Agent 检查：敏感词、政治表述、事实准确性、法律法规引用正确性
- [ ] 输出三级结果：通过 / 警告（附修改建议）/ 阻断（必须修改）
- [ ] 审核记录保存到 `data/reviews/` 目录

**US-CR.2** 作为审核系统，我希望模拟多级审核流程。
- [ ] Agent 依次模拟初审（格式/敏感词）、复审（内容质量）、终审（政策合规）三个角色
- [ ] 每级审核独立给出意见，最终汇总为审核报告

#### Skill: plan-manager（计划管理 — P1）

**US-PM.1** 作为科室领导，我希望 Agent 自动生成月度宣传计划。
- [ ] 输入目标月份，Agent 结合当月节假日、季节特性、历史数据生成计划草案
- [ ] 计划包含：周度主题、内容方向、形式建议、发布渠道、时间节点
- [ ] 计划保存为 Markdown 文件到 `output/plans/`

#### Skill: analytics（效果监测 — P1）

**US-AN.1** 作为数据分析员，我希望 Agent 基于模拟数据生成分析报告。
- [ ] 读取 `data/analytics/` 下的模拟传播数据（JSON）
- [ ] 生成月度效果分析报告：核心指标汇总、Top 内容排名、趋势分析、优化建议
- [ ] 报告保存为 Markdown 文件

#### Skill: precision-outreach（精准宣传 — P2）

**US-PO.1** 基于模拟的事故/违法数据，Agent 识别高风险区域并生成定向宣传方案。

#### Skill: emergency-response（应急响应 — P2）

**US-ER.1** Agent 根据预警信息自动生成应急宣传内容包（安全提示、绕行建议等）。

#### Skill: public-relations（公共关系 — P2）

**US-PR.1** Agent 模拟智能客服应答常见交通业务咨询。

### 2.4 非目标（Not In Scope）

以下内容**不在**本地验证范围内：

- Web UI 界面（本阶段纯对话交互 + 文件输出）
- 真实平台 API 对接（微信/微博/抖音）
- 真实视频/图片生成（仅生成文案方案和脚本，不生成实际媒体文件）
- 多用户并发和权限控制
- 数据库存储（使用本地文件系统）
- 信息安全等级保护
- 生产环境部署

---

## 3. AI 系统需求

### 3.1 AI 能力矩阵

OpenClaw 原生连接 LLM，以下能力通过 Skill 指令 + LLM 推理直接实现，**不需要 Mock**：

| AI 能力 | Skill | 实现方式 |
|---------|-------|---------|
| 多平台文案生成 | content-producer | LLM 直接生成，Skill 提供平台规范约束 |
| 海报方案生成 | content-producer | LLM 生成文案方案 + 视觉建议（非图片） |
| 短视频脚本生成 | content-producer | LLM 生成分镜脚本 |
| 素材标签标引 | media-hub | LLM 根据素材描述/文件名生成多维标签 |
| 自然语言素材搜索 | media-hub | LLM 理解查询意图，匹配元数据标签 |
| 内容合规审核 | content-reviewer | LLM 模拟审核员，检查敏感词/政策合规 |
| 宣传计划生成 | plan-manager | LLM 结合时间/节日/季节生成结构化计划 |
| 效果分析报告 | analytics | LLM 读取 JSON 数据，生成分析报告 |
| 精准宣传方案 | precision-outreach | LLM 分析风险数据，生成定向方案 |
| 应急内容生成 | emergency-response | LLM 根据预警模板快速生成内容包 |
| 智能客服应答 | public-relations | LLM 模拟客服回答常见咨询 |

### 3.2 评估策略

| 评估维度 | 方法 | 通过标准 |
|---------|------|---------|
| 文案质量 | 人工评审 10 篇生成文案 | ≥ 70% 评为"可用"（仅需少量修改） |
| 审核准确性 | 准备 10 篇含已知问题的测试文案 | 问题检出率 ≥ 80% |
| 素材检索 | 10 条测试查询 | 相关结果命中率 ≥ 80% |
| 计划合理性 | 3 份月度计划人工评审 | 结构完整、主题切题 |

---

## 4. 技术规格

### 4.1 架构概览

```
┌────────────────────────────────────────────────┐
│              OpenClaw 本地实例                    │
│                                                │
│  ┌──────────────────────────────────────────┐  │
│  │            LLM 推理层                      │  │
│  │     (Claude / GPT / 本地模型 via API Key)   │  │
│  └──────────────┬───────────────────────────┘  │
│                 │                              │
│  ┌──────────────▼───────────────────────────┐  │
│  │          OpenClaw Agent Core              │  │
│  │   (对话管理 / Skill 路由 / 上下文记忆)       │  │
│  └──────────────┬───────────────────────────┘  │
│                 │                              │
│  ┌──────────────▼───────────────────────────┐  │
│  │          Skills 层（本项目核心）             │  │
│  │                                          │  │
│  │  ┌─────────────┐  ┌─────────────┐        │  │
│  │  │content-     │  │media-hub    │        │  │
│  │  │producer     │  │             │        │  │
│  │  └─────────────┘  └─────────────┘        │  │
│  │  ┌─────────────┐  ┌─────────────┐        │  │
│  │  │content-     │  │plan-manager │        │  │
│  │  │reviewer     │  │             │        │  │
│  │  └─────────────┘  └─────────────┘        │  │
│  │  ┌─────────────┐  ┌─────────────┐        │  │
│  │  │analytics    │  │precision-   │        │  │
│  │  │             │  │outreach     │        │  │
│  │  └─────────────┘  └─────────────┘        │  │
│  │  ┌─────────────┐  ┌─────────────┐        │  │
│  │  │emergency-   │  │public-      │        │  │
│  │  │response     │  │relations    │        │  │
│  │  └─────────────┘  └─────────────┘        │  │
│  └──────────────────────────────────────────┘  │
│                 │                              │
│  ┌──────────────▼───────────────────────────┐  │
│  │          本地文件系统                       │  │
│  │  data/       — 素材元数据、模拟数据         │  │
│  │  output/     — 生成的内容、计划、报告        │  │
│  │  templates/  — 各类模板                    │  │
│  └──────────────────────────────────────────┘  │
└────────────────────────────────────────────────┘
```

### 4.2 Skill 目录结构

每个 Skill 是一个包含 `SKILL.md` 的目录，遵循 OpenClaw AgentSkills 规范：

```yaml
# SKILL.md 格式
---
name: skill-name
description: 技能描述，用于 Agent 自动路由
---

# Skill 标题
## When to Use / 触发条件
## Instructions / 执行指令
## Output Format / 输出规范
```

### 4.3 数据目录结构

```
traffic-project/
├── skills/                        # OpenClaw workspace skills
│   ├── content-producer/
│   │   └── SKILL.md
│   ├── media-hub/
│   │   └── SKILL.md
│   ├── content-reviewer/
│   │   └── SKILL.md
│   ├── plan-manager/
│   │   └── SKILL.md
│   ├── analytics/
│   │   └── SKILL.md
│   ├── precision-outreach/
│   │   └── SKILL.md
│   ├── emergency-response/
│   │   └── SKILL.md
│   └── public-relations/
│       └── SKILL.md
├── data/                          # 本地数据
│   ├── materials/                 # 素材库
│   │   ├── index.json             # 素材元数据索引
│   │   └── items/                 # 素材文件 + 单条元数据
│   │       ├── mat-001.json
│   │       ├── mat-002.json
│   │       └── ...
│   ├── analytics/                 # 模拟传播数据
│   │   ├── wechat-202601.json
│   │   ├── weibo-202601.json
│   │   └── douyin-202601.json
│   ├── reviews/                   # 审核记录
│   │   └── review-*.json
│   └── accident-data/             # 模拟事故/违法数据（P2 用）
│       └── 2025-summary.json
├── output/                        # Agent 生成的产出物
│   ├── content/                   # 生成的文案
│   ├── plans/                     # 生成的计划
│   ├── reports/                   # 分析报告
│   ├── posters/                   # 海报方案（JSON）
│   └── scripts/                   # 视频脚本
├── templates/                     # 提示词模板和格式模板
│   ├── content-wechat.md          # 微信推文模板
│   ├── content-weibo.md           # 微博模板
│   ├── content-douyin.md          # 抖音模板
│   ├── review-checklist.md        # 审核检查清单
│   ├── plan-monthly.md            # 月度计划模板
│   └── report-monthly.md          # 月度报告模板
├── docs/                          # 项目文档
│   ├── PRD.md                     # 本文件
│   └── 开发计划.md
└── 交通安全宣传教育工作智能化应用场景.md  # 原始需求文档
```

### 4.4 核心数据模型

数据以 JSON 文件存储在本地文件系统：

```jsonc
// data/materials/items/mat-001.json
{
  "id": "mat-001",
  "title": "高速公路追尾事故现场",
  "type": "video",
  "filename": "highway-crash-20250115.mp4",
  "tags": ["追尾", "高速公路", "冬季", "雨天", "货车"],
  "source": "执法记录仪",
  "description": "2025年1月15日G15高速K120处，雨天路滑导致货车追尾小轿车",
  "location": "G15高速K120",
  "date": "2025-01-15",
  "usageCount": 3
}

// data/reviews/review-001.json
{
  "id": "review-001",
  "contentFile": "output/content/春运安全-微信-20260211.md",
  "stages": [
    {
      "stage": "ai_first_review",
      "result": "pass_with_warnings",
      "issues": [
        {"level": "warning", "text": "第3段'事故率下降30%'建议补充数据来源"}
      ],
      "timestamp": "2026-02-11T10:30:00"
    },
    {
      "stage": "ai_quality_review",
      "result": "pass",
      "issues": [],
      "timestamp": "2026-02-11T10:30:05"
    }
  ],
  "finalResult": "approved"
}
```

### 4.5 安全与隐私

- 所有数据存储在本地文件系统，不上传到外部服务
- 素材元数据中不包含真实个人信息（验证阶段使用模拟数据）
- LLM API 调用遵循 OpenClaw 的 API Key 管理机制

---

## 5. 风险与路线图

### 5.1 分期路线图

```
本地验证期（P0）— 核心 Skill 开发 + 链路验证
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ▸ content-producer：多平台文案 + 海报方案 + 视频脚本生成
  ▸ media-hub：素材标引 + 自然语言检索
  ▸ content-reviewer：AI 合规审核 + 多级审核模拟
  ▸ 准备模板文件和模拟数据集
  ▸ 端到端链路验证：主题 → 检索素材 → 生成内容 → 审核

扩展验证期（P1）— 计划与数据闭环
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ▸ plan-manager：月度计划自动生成
  ▸ analytics：传播效果分析报告生成
  ▸ Skill 间协作验证：计划驱动内容生产

未来演进（P2）— 扩展场景 + 产品化
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ▸ precision-outreach / emergency-response / public-relations
  ▸ 评估是否需要 Web UI 层
  ▸ 考虑发布到 ClawHub 供同行复用
```

### 5.2 技术风险

| 风险 | 影响 | 缓解措施 |
|------|------|---------|
| LLM 生成的宣传文案不符合交警文体规范 | 输出质量不达标 | 在 Skill 中嵌入交警宣传文体范例和约束规则 |
| 素材检索依赖 LLM 语义理解，准确率不稳定 | 搜索体验差 | 元数据标签标准化 + 提供检索 fallback 规则 |
| 审核检查遗漏敏感内容 | 合规风险 | 在 Skill 中内置敏感词清单 + 明确标注 AI 审核仅为辅助 |
| OpenClaw 版本更新导致 Skill 格式变化 | 兼容性问题 | 遵循标准 SKILL.md 格式，避免依赖非稳定特性 |
| 单次对话上下文有限，长文生成可能截断 | 内容不完整 | Skill 中设计分段生成策略 |

### 5.3 依赖项

| 依赖 | 类型 | 状态 |
|------|------|------|
| OpenClaw | AI Agent 框架 | 开源可用（GitHub 68k stars） |
| LLM API Key | AI 推理能力 | 需用户自备（Claude / GPT / 本地模型） |
| Skills CLI (`npx skills`) | Skill 管理工具 | 已安装 |
| Node.js | 运行时 | 需本地安装 |
| 模拟数据集 | 测试数据 | 需准备（素材元数据、传播数据） |

### 5.4 从 PoC 到产品的演进路径

```
当前：OpenClaw Skills（本地验证）
  │
  ├─ 验证通过 → 方案 A：保持 Agent 模式
  │                       ├── 接入真实平台 API（微信/微博）
  │                       ├── 接入真实数据源（监控/执法记录仪）
  │                       └── 部署为团队共享的 OpenClaw 实例
  │
  └─ 需要 Web UI → 方案 B：Skills 作为后端 + Web 前端
                          ├── Vue 3 / React Web 界面
                          ├── OpenClaw 作为 AI 服务层
                          └── REST API 桥接 Agent 调用
```
